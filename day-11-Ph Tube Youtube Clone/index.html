<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PH Tube - YouTube Clone</title>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@3.9.4/dist/full.css" rel="stylesheet" type="text/css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <style>
    body {
      transition: background-color 0.3s, color 0.3s;
    }

    /* Animation keyframes */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes scaleIn {
      from { transform: scale(0.95); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    @keyframes slideIn {
      from { transform: translateX(-20px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes tumble {
      0% { transform: rotate(0deg) translateY(0); }
      25% { transform: rotate(-5deg) translateY(-5px); }
      50% { transform: rotate(0deg) translateY(-10px); }
      75% { transform: rotate(5deg) translateY(-5px); }
      100% { transform: rotate(0deg) translateY(0); }
    }

    @keyframes floatHeader {
      0% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
      100% { transform: translateY(0); }
    }

    @keyframes pulseGlow {
      0% { box-shadow: 0 0 5px rgba(255, 0, 0, 0.5); }
      50% { box-shadow: 0 0 20px rgba(255, 0, 0, 0.8); }
      100% { box-shadow: 0 0 5px rgba(255, 0, 0, 0.5); }
    }

    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }

    @keyframes bounceIn {
      0% { transform: scale(0.3); opacity: 0; }
      50% { transform: scale(1.05); opacity: 0.8; }
      70% { transform: scale(0.9); opacity: 0.9; }
      100% { transform: scale(1); opacity: 1; }
    }

    /* Animation classes */
    .animate-fade-in {
      animation: fadeIn 0.5s ease-out forwards;
    }

    .animate-scale-in {
      animation: scaleIn 0.3s ease-out forwards;
    }

    .animate-slide-in {
      animation: slideIn 0.3s ease-out forwards;
    }

    /* Video card hover effects */
    .video-card {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .video-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }

    .video-card::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to bottom, transparent 50%, rgba(0, 0, 0, 0.1));
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .video-card:hover::after {
      opacity: 1;
    }

    /* Category button animations */
    .btn {
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.6s ease, height 0.6s ease;
    }

    .btn:hover::after {
      width: 300px;
      height: 300px;
    }

    /* Search bar hover effect */
    .join-item {
      transition: all 0.3s ease;
    }

    .join-item:hover {
      box-shadow: 0 0 0 2px var(--primary);
    }

    /* Profile dropdown hover effects */
    #profile-dropdown a {
      transition: all 0.3s ease;
      position: relative;
    }

    #profile-dropdown a::before {
      content: '';
      position: absolute;
      left: 0;
      bottom: 0;
      width: 0;
      height: 2px;
      background: var(--primary);
      transition: width 0.3s ease;
    }

    #profile-dropdown a:hover::before {
      width: 100%;
    }

    /* Modal close button hover */
    .modal-action .btn {
      transition: all 0.3s ease;
    }

    .modal-action .btn:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    /* Channel icon hover effect */
    .channel-icon {
      transition: all 0.3s ease;
    }

    .channel-icon:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    /* Video title hover effect */
    .font-semibold {
      transition: all 0.3s ease;
    }

    .font-semibold:hover {
      color: var(--primary);
      transform: translateX(5px);
    }

    /* Profile avatar hover effect */
    .avatar {
      transition: all 0.3s ease;
    }

    .avatar:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    /* Search button hover effect */
    #search-button {
      transition: all 0.3s ease;
    }

    #search-button:hover {
      transform: scale(1.1);
      background: var(--primary);
      color: white;
    }

    /* Video thumbnail hover effect */
    .group:hover img {
      transform: scale(1.05);
    }

    .group:hover span {
      transform: scale(1.1);
      background: var(--primary);
    }

    /* Staggered animation for video cards */
    .video-card {
      opacity: 0;
    }

    .video-card:nth-child(1) { animation-delay: 0.1s; }
    .video-card:nth-child(2) { animation-delay: 0.2s; }
    .video-card:nth-child(3) { animation-delay: 0.3s; }
    .video-card:nth-child(4) { animation-delay: 0.4s; }
    .video-card:nth-child(5) { animation-delay: 0.5s; }
    .video-card:nth-child(6) { animation-delay: 0.6s; }

    /* Islamic content specific animations */
    .video-card[data-category="islamic"] {
      position: relative;
      border: 2px solid transparent;
      background: linear-gradient(var(--card-bg), var(--card-bg)) padding-box,
                  linear-gradient(45deg, #4CAF50, #2196F3) border-box;
      border-radius: 12px;
      overflow: hidden;
    }

    .video-card[data-category="islamic"]:hover {
      animation: tumble 1s ease-in-out;
      transform-origin: center bottom;
    }

    .video-card[data-category="islamic"]:hover figure {
      transform: scale(1.05) rotate(2deg);
    }

    .video-card[data-category="islamic"]:hover .channel-icon {
      animation: tumble 1s ease-in-out;
    }

    .video-card[data-category="islamic"]:hover .font-semibold {
      color: #4CAF50;
      transform: translateX(10px);
    }

    .video-card[data-category="islamic"]::before {
      content: 'üïå';
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 1.5rem;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 1;
    }

    .video-card[data-category="islamic"]:hover::before {
      opacity: 1;
    }

    /* Islamic content decorative elements */
    .video-card[data-category="islamic"]::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 0c16.569 0 30 13.431 30 30 0 16.569-13.431 30-30 30C13.431 60 0 46.569 0 30 0 13.431 13.431 0 30 0zm0 5C16.193 5 5 16.193 5 30s11.193 25 25 25 25-11.193 25-25S43.807 5 30 5zm0 10c8.284 0 15 6.716 15 15s-6.716 15-15 15-15-6.716-15-15 6.716-15 15-15z' fill='%234CAF50' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
      opacity: 0.5;
      pointer-events: none;
    }

    .video-card[data-category="islamic"] figure {
      position: relative;
    }

    .video-card[data-category="islamic"] figure::before {
      content: '‚ò™Ô∏è';
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 1.5rem;
      z-index: 2;
      opacity: 0.8;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    .video-card[data-category="islamic"] figure::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, rgba(76, 175, 80, 0.1), rgba(33, 150, 243, 0.1));
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .video-card[data-category="islamic"]:hover figure::after {
      opacity: 1;
    }

    .video-card[data-category="islamic"] .channel-icon {
      border: 2px solid #4CAF50;
      padding: 2px;
    }

    .video-card[data-category="islamic"] .font-semibold {
      position: relative;
      padding-left: 20px;
    }

    .video-card[data-category="islamic"] .font-semibold::before {
      content: 'üïå';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1rem;
      opacity: 0.7;
    }

    /* Enhanced Animations */
    @keyframes floatHeader {
      0% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
      100% { transform: translateY(0); }
    }

    @keyframes pulseGlow {
      0% { box-shadow: 0 0 5px rgba(255, 0, 0, 0.5); }
      50% { box-shadow: 0 0 20px rgba(255, 0, 0, 0.8); }
      100% { box-shadow: 0 0 5px rgba(255, 0, 0, 0.5); }
    }

    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }

    @keyframes bounceIn {
      0% { transform: scale(0.3); opacity: 0; }
      50% { transform: scale(1.05); opacity: 0.8; }
      70% { transform: scale(0.9); opacity: 0.9; }
      100% { transform: scale(1); opacity: 1; }
    }

    /* Header Animations */
    .navbar {
      animation: floatHeader 3s ease-in-out infinite;
    }

    .navbar .btn-ghost {
      position: relative;
      overflow: hidden;
    }

    .navbar .btn-ghost::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.2),
        transparent
      );
      animation: shimmer 2s infinite;
    }

    /* PH Tube Logo Animation */
    .text-red-600 {
      animation: pulseGlow 2s infinite;
    }

    /* Search Bar Animation */
    .join-item {
      transition: all 0.3s ease;
    }

    .join-item:focus-within {
      transform: scale(1.02);
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
    }

    /* Category Buttons Animation */
    .btn[data-category] {
      position: relative;
      overflow: hidden;
    }

    .btn[data-category]::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.6s ease, height 0.6s ease;
    }

    .btn[data-category]:hover::before {
      width: 300px;
      height: 300px;
    }

    /* Video Card Enhanced Animations */
    .video-card {
      animation: bounceIn 0.6s ease-out forwards;
      opacity: 0;
    }

    .video-card:hover .channel-icon {
      animation: bounceIn 0.5s ease-out;
    }

    .video-card:hover figure img {
      transform: scale(1.1) rotate(2deg);
    }

    /* Profile Section Animations */
    .avatar {
      transition: all 0.3s ease;
    }

    .avatar:hover {
      transform: scale(1.1) rotate(5deg);
    }

    /* Modal Animation Enhancement */
    .modal-box {
      animation: bounceIn 0.5s ease-out;
    }

    /* Loading Animation for Video Thumbnails */
    .video-card figure {
      position: relative;
      overflow: hidden;
    }

    .video-card figure::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 50%;
      height: 100%;
      background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.2),
        transparent
      );
      animation: shimmer 2s infinite;
    }

    /* Staggered Animation for Video Grid */
    .video-card:nth-child(1) { animation-delay: 0.1s; }
    .video-card:nth-child(2) { animation-delay: 0.2s; }
    .video-card:nth-child(3) { animation-delay: 0.3s; }
    .video-card:nth-child(4) { animation-delay: 0.4s; }
    .video-card:nth-child(5) { animation-delay: 0.5s; }
    .video-card:nth-child(6) { animation-delay: 0.6s; }
    .video-card:nth-child(7) { animation-delay: 0.7s; }
    .video-card:nth-child(8) { animation-delay: 0.8s; }
    .video-card:nth-child(9) { animation-delay: 0.9s; }
    .video-card:nth-child(10) { animation-delay: 1.0s; }

    /* Search Button Animation */
    #search-button {
      transition: all 0.3s ease;
    }

    #search-button:hover {
      transform: scale(1.1) rotate(5deg);
      background: var(--primary);
      color: white;
    }

    /* Profile Dropdown Animation */
    #profile-dropdown {
      animation: bounceIn 0.3s ease-out;
    }

    #profile-dropdown a {
      transition: all 0.3s ease;
    }

    #profile-dropdown a:hover {
      transform: translateX(10px);
      background: rgba(0, 0, 0, 0.1);
    }

    /* Clock Animation */
    #current-time {
      animation: pulseGlow 2s infinite;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="navbar bg-base-100 shadow-lg fixed top-0 z-50">
    <div class="flex-1">
      <a class="btn btn-ghost normal-case text-xl">
        <span class="text-red-600 font-bold">PH</span>Tube
      </a>
    </div>
    <!-- Add Search Bar -->
    <div class="flex-none w-96">
      <div class="join w-full">
        <input type="text" placeholder="Search videos..." class="input input-bordered join-item w-full input-sm" id="search-input" />
        <button class="btn btn-sm join-item rounded-r-full" id="search-button">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
        </button>
      </div>
    </div>
    <div class="flex-none gap-4 items-center">
      <div class="flex items-center gap-2">
        <div class="text-sm opacity-70" id="current-time"></div>
        <!-- Add Notification Button -->
        <div class="relative">
          <button class="btn btn-ghost btn-circle" id="notification-button">
            <div class="indicator">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
              </svg>
              <span class="badge badge-xs badge-primary indicator-item">3</span>
            </div>
          </button>
          <!-- Notification Dropdown -->
          <div id="notification-dropdown" class="hidden absolute right-0 mt-2 w-80 bg-base-200 rounded-lg shadow-lg z-50">
            <div class="p-4 border-b border-base-300">
              <h3 class="font-semibold">Notifications</h3>
            </div>
            <div class="max-h-96 overflow-y-auto">
              <!-- Notification Items -->
              <div class="p-4 hover:bg-base-300 cursor-pointer transition-colors duration-200">
                <div class="flex gap-3">
                  <div class="w-10 h-10 rounded-full overflow-hidden">
                    <img src="https://ui-avatars.com/api/?name=Code+Pro&background=random" />
                  </div>
                  <div>
                    <p class="text-sm"><span class="font-semibold">Code Pro</span> uploaded a new video</p>
                    <p class="text-xs opacity-70">2 hours ago</p>
                  </div>
                </div>
              </div>
              <div class="p-4 hover:bg-base-300 cursor-pointer transition-colors duration-200">
                <div class="flex gap-3">
                  <div class="w-10 h-10 rounded-full overflow-hidden">
                    <img src="https://ui-avatars.com/api/?name=React+Master&background=random" />
                  </div>
                  <div>
                    <p class="text-sm"><span class="font-semibold">React Master</span> went live</p>
                    <p class="text-xs opacity-70">5 hours ago</p>
                  </div>
                </div>
              </div>
              <div class="p-4 hover:bg-base-300 cursor-pointer transition-colors duration-200">
                <div class="flex gap-3">
                  <div class="w-10 h-10 rounded-full overflow-hidden">
                    <img src="https://ui-avatars.com/api/?name=Islamic+Channel&background=random" />
                  </div>
                  <div>
                    <p class="text-sm"><span class="font-semibold">Islamic Channel</span> uploaded a new video</p>
                    <p class="text-xs opacity-70">1 day ago</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="p-4 border-t border-base-300">
              <button class="btn btn-ghost btn-sm w-full">View all notifications</button>
            </div>
          </div>
        </div>
        <div class="avatar online cursor-pointer" id="profile-icon">
          <div class="w-10 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2">
            <img src="https://ui-avatars.com/api/?name=Guest&background=random" id="profile-image" />
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Login Modal -->
  <dialog id="login_modal" class="modal">
    <div class="modal-box w-11/12 max-w-md bg-base-200">
      <h3 class="font-bold text-lg mb-4">Sign in to PH Tube</h3>
      <div class="flex flex-col gap-4">
        <div id="g_id_onload"
             data-client_id="YOUR_GOOGLE_CLIENT_ID"
             data-callback="handleCredentialResponse">
        </div>
        <div class="g_id_signin w-full"
             data-type="standard"
             data-size="large"
             data-theme="outline"
             data-text="sign_in_with"
             data-shape="rectangular"
             data-logo_alignment="left"
             data-width="100%">
        </div>
        <div class="divider">OR</div>
        <button class="btn btn-outline" onclick="signInWithGoogle()">
          <img src="https://www.google.com/favicon.ico" class="w-5 h-5 mr-2" />
          Sign in with Google
        </button>
      </div>
      <div class="modal-action">
        <form method="dialog">
          <button class="btn">Close</button>
        </form>
      </div>
    </div>
    <form method="dialog" class="modal-backdrop">
      <button>close</button>
    </form>
  </dialog>

  <!-- Profile Dropdown -->
  <div id="profile-dropdown" class="hidden absolute right-4 top-16 w-48 bg-base-200 rounded-lg shadow-lg z-50">
    <div class="p-4 border-b border-base-300">
      <div class="flex items-center gap-3">
        <div class="avatar">
          <div class="w-10 rounded-full">
            <img src="" id="dropdown-profile-image" />
          </div>
        </div>
        <div>
          <p class="font-semibold" id="dropdown-name">Guest</p>
          <p class="text-sm opacity-70" id="dropdown-email"></p>
        </div>
      </div>
    </div>
    <ul class="py-2">
      <li><a href="#" class="block px-4 py-2 hover:bg-base-300">Your Channel</a></li>
      <li><a href="#" class="block px-4 py-2 hover:bg-base-300" onclick="openSettings()">Settings</a></li>
      <li><a href="#" class="block px-4 py-2 hover:bg-base-300">Help</a></li>
      <li class="border-t border-base-300 mt-2"><a href="#" class="block px-4 py-2 hover:bg-base-300 text-error" onclick="signOut()">Sign Out</a></li>
    </ul>
  </div>

  <!-- Settings Modal -->
  <dialog id="settings_modal" class="modal">
    <div class="modal-box w-11/12 max-w-2xl bg-base-200">
      <h3 class="font-bold text-lg mb-4">Settings</h3>
      
      <!-- Theme Settings -->
      <div class="mb-6">
        <h4 class="font-semibold mb-2">Theme</h4>
        <div class="flex gap-4">
          <button class="btn btn-outline" onclick="setTheme('light')">
            <span class="mr-2">‚òÄÔ∏è</span> Light
          </button>
          <button class="btn btn-outline" onclick="setTheme('dark')">
            <span class="mr-2">üåô</span> Dark
          </button>
          <button class="btn btn-outline" onclick="setTheme('system')">
            <span class="mr-2">üíª</span> System
          </button>
        </div>
      </div>

      <!-- Video Quality Settings -->
      <div class="mb-6">
        <h4 class="font-semibold mb-2">Default Video Quality</h4>
        <select class="select select-bordered w-full max-w-xs">
          <option>Auto</option>
          <option>1080p</option>
          <option>720p</option>
          <option>480p</option>
          <option>360p</option>
        </select>
      </div>

      <!-- Notification Settings -->
      <div class="mb-6">
        <h4 class="font-semibold mb-2">Notifications</h4>
        <div class="space-y-2">
          <label class="flex items-center gap-2">
            <input type="checkbox" class="toggle toggle-primary" checked />
            <span>New video notifications</span>
          </label>
          <label class="flex items-center gap-2">
            <input type="checkbox" class="toggle toggle-primary" checked />
            <span>Channel updates</span>
          </label>
          <label class="flex items-center gap-2">
            <input type="checkbox" class="toggle toggle-primary" />
            <span>Comments on your videos</span>
          </label>
        </div>
      </div>

      <!-- Privacy Settings -->
      <div class="mb-6">
        <h4 class="font-semibold mb-2">Privacy</h4>
        <div class="space-y-2">
          <label class="flex items-center gap-2">
            <input type="checkbox" class="toggle toggle-primary" checked />
            <span>Show your activity status</span>
          </label>
          <label class="flex items-center gap-2">
            <input type="checkbox" class="toggle toggle-primary" />
            <span>Show your watch history</span>
          </label>
        </div>
      </div>

      <!-- Language Settings -->
      <div class="mb-6">
        <h4 class="font-semibold mb-2">Language</h4>
        <select class="select select-bordered w-full max-w-xs">
          <option>English</option>
          <option>‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
          <option>ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
          <option>ÿßÿ±ÿØŸà</option>
        </select>
      </div>

      <div class="modal-action">
        <button class="btn btn-primary" onclick="saveSettings()">Save Changes</button>
        <form method="dialog">
          <button class="btn">Close</button>
        </form>
      </div>
    </div>
    <form method="dialog" class="modal-backdrop">
      <button>close</button>
    </form>
  </dialog>

  <!-- Main Content -->
  <main class="container mx-auto px-4 pt-20">
    <!-- Categories -->
    <div class="flex gap-4 overflow-x-auto py-4 mb-6">
      <button class="btn btn-ghost" data-category="all">All</button>
      <button class="btn btn-primary" data-category="tutorials">Programming</button>
      <button class="btn btn-ghost" data-category="mern">MERN Stack</button>
      <button class="btn btn-ghost" data-category="islamic">Islamic Content</button>
      <button class="btn btn-ghost" data-category="quran">Quran Recitation</button>
      <button class="btn btn-ghost" data-category="stories">Prophet Stories</button>
    </div>

    <!-- Video Grid -->
    <div id="video-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
  </main>

  <!-- Modal -->
  <dialog id="video_modal" class="modal">
    <div class="modal-box w-11/12 max-w-5xl bg-base-200">
      <div class="aspect-video w-full bg-black">
        <iframe id="video_player" class="w-full h-full" src="" frameborder="0" allowfullscreen></iframe>
      </div>
      <div class="mt-4">
        <h3 id="video_title" class="text-xl font-bold"></h3>
        <p id="video_views" class="text-sm opacity-70"></p>
        <p id="video_description" class="mt-2 text-sm"></p>
      </div>
      <div class="modal-action">
        <form method="dialog">
          <button class="btn">Close</button>
        </form>
      </div>
    </div>
    <form method="dialog" class="modal-backdrop">
      <button>close</button>
    </form>
  </dialog>

  <script>
    // User state
    let currentUser = null;

    // Search functionality
    const searchInput = document.getElementById('search-input');
    const searchButton = document.getElementById('search-button');

    function performSearch() {
      const searchTerm = searchInput.value.toLowerCase().trim();
      if (!searchTerm) {
        renderVideos(currentCategory);
        return;
      }

      const filteredVideos = videoData.filter(video => 
        video.title.toLowerCase().includes(searchTerm) ||
        video.channel.toLowerCase().includes(searchTerm) ||
        video.description.toLowerCase().includes(searchTerm)
      );

      grid.innerHTML = "";
      filteredVideos.forEach((video, index) => {
        const card = document.createElement("div");
        card.className = "video-card bg-base-200 rounded-lg overflow-hidden cursor-pointer animate-fade-in";
        card.style.animationDelay = `${index * 0.1}s`;
        card.innerHTML = `
          <figure class="relative group">
            <img src="https://i.ytimg.com/vi/${video.videoId}/maxresdefault.jpg" class="w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105" />
            <span class="absolute bottom-2 right-2 bg-black bg-opacity-80 text-white px-2 py-1 rounded text-sm transform transition-transform duration-300 group-hover:scale-110">‚ñ∂Ô∏è</span>
          </figure>
          <div class="p-4">
            <div class="flex gap-3">
              <div class="channel-icon w-10 h-10 rounded-full overflow-hidden transition-transform duration-300 hover:scale-110">
                <img src="https://ui-avatars.com/api/?name=${encodeURIComponent(video.channel)}&background=random" />
              </div>
              <div>
                <h3 class="font-semibold transition-colors duration-300 hover:text-primary">${video.title}</h3>
                <p class="text-sm opacity-70">${video.channel}</p>
                <p class="text-sm opacity-70">${video.views}</p>
              </div>
            </div>
          </div>
        `;
        card.addEventListener("click", () => {
          videoTitle.textContent = video.title;
          videoViews.textContent = video.views;
          videoDescription.textContent = video.description;
          videoPlayer.src = `https://www.youtube.com/embed/${video.videoId}?autoplay=1`;
          modal.showModal();
        });
        grid.appendChild(card);
      });
    }

    // Search event listeners
    searchButton.addEventListener('click', performSearch);
    searchInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        performSearch();
      }
    });

    // Clear search when changing categories
    document.querySelectorAll('[data-category]').forEach(button => {
      button.addEventListener('click', () => {
        searchInput.value = '';
        // ... existing category button code ...
      });
    });

    // Profile icon click handler
    document.getElementById('profile-icon').addEventListener('click', () => {
      if (currentUser) {
        const dropdown = document.getElementById('profile-dropdown');
        dropdown.classList.toggle('hidden');
      } else {
        document.getElementById('login_modal').showModal();
      }
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', (e) => {
      const dropdown = document.getElementById('profile-dropdown');
      const profileIcon = document.getElementById('profile-icon');
      if (!profileIcon.contains(e.target) && !dropdown.contains(e.target)) {
        dropdown.classList.add('hidden');
      }
    });

    // Handle Google Sign-In
    function handleCredentialResponse(response) {
      // Decode the credential response
      const responsePayload = jwt_decode(response.credential);
      
      // Update UI with user info
      currentUser = {
        name: responsePayload.name,
        email: responsePayload.email,
        picture: responsePayload.picture
      };

      updateProfileUI();
      document.getElementById('login_modal').close();
    }

    // Update profile UI
    function updateProfileUI() {
      if (currentUser) {
        document.getElementById('profile-image').src = currentUser.picture;
        document.getElementById('dropdown-profile-image').src = currentUser.picture;
        document.getElementById('dropdown-name').textContent = currentUser.name;
        document.getElementById('dropdown-email').textContent = currentUser.email;
      } else {
        document.getElementById('profile-image').src = 'https://ui-avatars.com/api/?name=Guest&background=random';
        document.getElementById('dropdown-profile-image').src = 'https://ui-avatars.com/api/?name=Guest&background=random';
        document.getElementById('dropdown-name').textContent = 'Guest';
        document.getElementById('dropdown-email').textContent = '';
      }
    }

    // Sign out function
    function signOut() {
      currentUser = null;
      updateProfileUI();
      document.getElementById('profile-dropdown').classList.add('hidden');
    }

    // Add clock functionality
    function updateClock() {
      const now = new Date();
      const timeString = now.toLocaleTimeString('en-US', { 
        hour: '2-digit', 
        minute: '2-digit',
        hour12: true 
      });
      document.getElementById('current-time').textContent = timeString;
    }

    // Update clock every second
    setInterval(updateClock, 1000);
    updateClock(); // Initial call

    const modal = document.getElementById("video_modal");
    const videoPlayer = document.getElementById("video_player");
    const videoTitle = document.getElementById("video_title");
    const videoViews = document.getElementById("video_views");
    const videoDescription = document.getElementById("video_description");

    // Add category to each video
    const videoData = [
      {
        title: "MERN Stack Tutorials",
        channel: "MERN Stack Pro",
        views: "2.1M views ‚Ä¢ 1 week ago",
        description: "Build a complete MERN Stack application from scratch.",
        videoId: "dGcsHMXbSOA",
        category: "mern"
      },
      {
        title: "Islamic History Video Playlists",
        channel: "Islamic History Channel",
        views: "2.5M views ‚Ä¢ 1 week ago",
        description: "A comprehensive animated series on early Islamic events.",
        videoId: "N8LhHkMeBxk",
        category: "islamic"
      },
      {
        title: "Surah Yasin Recitation",
        channel: "Quran Reciter",
        views: "3M views ‚Ä¢ 2 weeks ago",
        description: "Beautiful recitation of Surah Yasin.",
        videoId: "bx5EOcX3YcA",
        category: "quran"
      },
      {
        title: "React.js for Beginners",
        channel: "Code Academy",
        views: "1.5M views ‚Ä¢ 2 months ago",
        description: "Learn React.js from scratch.",
        videoId: "Ke90Tje7VS0",
        category: "tutorials"
      },
      {
        title: "The Story of Prophet Yusuf (AS)",
        channel: "Islamic Stories",
        views: "2.9M views ‚Ä¢ 3 weeks ago",
        description: "Animated story of Prophet Yusuf.",
        videoId: "TlObLz0wJAk",
        category: "stories"
      },
      {
        title: "Build REST APIs with Node.js",
        channel: "Backend Pro",
        views: "980K views ‚Ä¢ 5 days ago",
        description: "Learn how to build APIs using Node.js.",
        videoId: "Oe421EPjeBE",
        category: "tutorials"
      },
      {
        title: "Understanding Islamic Finance",
        channel: "Islamic Scholar",
        views: "1.1M views ‚Ä¢ 1 month ago",
        description: "An introduction to Islamic financial principles.",
        videoId: "t_HlWjKxzXM",
        category: "islamic"
      },
      {
        title: "MongoDB Complete Tutorial",
        channel: "Database Master",
        views: "670K views ‚Ä¢ 2 weeks ago",
        description: "Learn everything about MongoDB.",
        videoId: "ofme2o29ngU",
        category: "mern"
      },
      {
        title: "Importance of Salah",
        channel: "Islamic Education",
        views: "2.2M views ‚Ä¢ 3 weeks ago",
        description: "Why prayer is the pillar of Islam.",
        videoId: "fDDyE1JcpDA",
        category: "islamic"
      },
      {
        title: "Redux Crash Course",
        channel: "React Master",
        views: "1.8M views ‚Ä¢ 1 week ago",
        description: "Master Redux in one video.",
        videoId: "poQXNp9ItL4",
        category: "tutorials"
      },
      {
        title: "Islamic Architecture",
        channel: "Muslim Heritage",
        views: "900K views ‚Ä¢ 2 months ago",
        description: "Explore historic Islamic architecture.",
        videoId: "UMWZMl9KccU",
        category: "islamic"
      },
      {
        title: "Node.js Authentication",
        channel: "Auth Guru",
        views: "1.2M views ‚Ä¢ 4 days ago",
        description: "JWT and secure auth in Node.js.",
        videoId: "2jqok-WgelI",
        category: "mern"
      },
      {
        title: "Animated Prophet Stories",
        channel: "Islamic Kids",
        views: "1.9M views ‚Ä¢ 5 weeks ago",
        description: "Prophet stories for children.",
        videoId: "v0vU2gopABY",
        category: "stories"
      },
      {
        title: "Full Stack E-commerce App",
        channel: "Code Pro",
        views: "3.3M views ‚Ä¢ 3 weeks ago",
        description: "MERN stack project walkthrough.",
        videoId: "1NrHkjlWVhM",
        category: "mern"
      },
      {
        title: "Surah Ar-Rahman",
        channel: "Quran World",
        views: "2.7M views ‚Ä¢ 2 weeks ago",
        description: "Emotional recitation of Surah Ar-Rahman.",
        videoId: "9-6cY2rp5pk",
        category: "quran"
      },
      {
        title: "React Routing with React Router",
        channel: "Dev Simplified",
        views: "1.3M views ‚Ä¢ 1 month ago",
        description: "Guide to React Router v6.",
        videoId: "Law7wfdg_ls",
        category: "tutorials"
      },
      {
        title: "Hajj Explained",
        channel: "Islamic Guidance",
        views: "1.5M views ‚Ä¢ 4 weeks ago",
        description: "Step-by-step Hajj guide.",
        videoId: "HZ0L2DC3uhk",
        category: "islamic"
      },
      {
        title: "Learn HTML in 1 Hour",
        channel: "Web Dev Simplified",
        views: "5M views ‚Ä¢ 1 year ago",
        description: "Quick HTML crash course.",
        videoId: "UB1O30fR-EE",
        category: "tutorials"
      },
      {
        title: "Surah Al-Mulk Recitation",
        channel: "Quran Lovers",
        views: "2.9M views ‚Ä¢ 1 month ago",
        description: "Soothing recitation of Surah Al-Mulk.",
        videoId: "N5pK7E_0C6M",
        category: "quran"
      }
    ];

    const grid = document.getElementById("video-grid");
    let currentCategory = "tutorials";

    function renderVideos(category = "tutorials") {
      grid.innerHTML = "";
      let filteredVideos = category === "all" 
        ? videoData 
        : videoData.filter(video => video.category === category);

      // Sort videos to show programming content first
      if (category === "all") {
        filteredVideos.sort((a, b) => {
          const programmingCategories = ['tutorials', 'mern'];
          const aIsProgramming = programmingCategories.includes(a.category);
          const bIsProgramming = programmingCategories.includes(b.category);
          
          if (aIsProgramming && !bIsProgramming) return -1;
          if (!aIsProgramming && bIsProgramming) return 1;
          return 0;
        });
      }

      filteredVideos.forEach((video, index) => {
        const card = document.createElement("div");
        card.className = "video-card bg-base-200 rounded-lg overflow-hidden cursor-pointer animate-fade-in";
        card.setAttribute('data-category', video.category);
        card.style.animationDelay = `${index * 0.1}s`;
        card.innerHTML = `
          <figure class="relative group">
            <img src="https://i.ytimg.com/vi/${video.videoId}/maxresdefault.jpg" 
                 class="w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105" />
            <span class="absolute bottom-2 right-2 bg-black bg-opacity-80 text-white px-2 py-1 rounded text-sm transform transition-transform duration-300 group-hover:scale-110">‚ñ∂Ô∏è</span>
          </figure>
          <div class="p-4">
            <div class="flex gap-3">
              <div class="channel-icon w-10 h-10 rounded-full overflow-hidden transition-transform duration-300 hover:scale-110">
                <img src="https://ui-avatars.com/api/?name=${encodeURIComponent(video.channel)}&background=random" />
              </div>
              <div>
                <h3 class="font-semibold transition-colors duration-300 hover:text-primary">${video.title}</h3>
                <p class="text-sm opacity-70">${video.channel}</p>
                <p class="text-sm opacity-70">${video.views}</p>
              </div>
            </div>
          </div>
        `;
        card.addEventListener("click", () => {
          videoTitle.textContent = video.title;
          videoViews.textContent = video.views;
          videoDescription.textContent = video.description;
          videoPlayer.src = `https://www.youtube.com/embed/${video.videoId}?autoplay=1`;
          modal.showModal();
        });
        grid.appendChild(card);
      });
    }

    // Add click handlers for category buttons
    document.querySelectorAll('[data-category]').forEach(button => {
      button.addEventListener('click', () => {
        // Update button styles
        document.querySelectorAll('[data-category]').forEach(btn => {
          btn.classList.remove('btn-primary');
          btn.classList.add('btn-ghost');
        });
        button.classList.remove('btn-ghost');
        button.classList.add('btn-primary');

        // Update videos
        currentCategory = button.dataset.category;
        renderVideos(currentCategory);
      });
    });

    // Initial render with programming content
    renderVideos('tutorials');

    modal.addEventListener("close", () => {
      videoPlayer.src = "";
    });

    // Settings functions
    function openSettings() {
      document.getElementById('settings_modal').showModal();
      document.getElementById('profile-dropdown').classList.add('hidden');
    }

    function setTheme(theme) {
      if (theme === 'system') {
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        document.documentElement.setAttribute('data-theme', prefersDark ? 'dark' : 'light');
      } else {
        document.documentElement.setAttribute('data-theme', theme);
      }
      localStorage.setItem('theme', theme);
    }

    function saveSettings() {
      // Get all settings values
      const videoQuality = document.querySelector('select').value;
      const notifications = {
        newVideos: document.querySelector('input[type="checkbox"]:nth-of-type(1)').checked,
        channelUpdates: document.querySelector('input[type="checkbox"]:nth-of-type(2)').checked,
        comments: document.querySelector('input[type="checkbox"]:nth-of-type(3)').checked
      };
      const privacy = {
        activityStatus: document.querySelector('input[type="checkbox"]:nth-of-type(4)').checked,
        watchHistory: document.querySelector('input[type="checkbox"]:nth-of-type(5)').checked
      };
      const language = document.querySelectorAll('select')[1].value;

      // Save settings to localStorage
      const settings = {
        videoQuality,
        notifications,
        privacy,
        language
      };
      localStorage.setItem('userSettings', JSON.stringify(settings));

      // Show success message
      const toast = document.createElement('div');
      toast.className = 'toast toast-top toast-end';
      toast.innerHTML = `
        <div class="alert alert-success">
          <span>Settings saved successfully!</span>
        </div>
      `;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);

      // Close modal
      document.getElementById('settings_modal').close();
    }

    // Load saved settings
    function loadSettings() {
      const savedSettings = localStorage.getItem('userSettings');
      if (savedSettings) {
        const settings = JSON.parse(savedSettings);
        // Apply saved settings
        document.querySelector('select').value = settings.videoQuality;
        document.querySelectorAll('input[type="checkbox"]')[0].checked = settings.notifications.newVideos;
        document.querySelectorAll('input[type="checkbox"]')[1].checked = settings.notifications.channelUpdates;
        document.querySelectorAll('input[type="checkbox"]')[2].checked = settings.notifications.comments;
        document.querySelectorAll('input[type="checkbox"]')[3].checked = settings.privacy.activityStatus;
        document.querySelectorAll('input[type="checkbox"]')[4].checked = settings.privacy.watchHistory;
        document.querySelectorAll('select')[1].value = settings.language;
      }
    }

    // Load settings when page loads
    document.addEventListener('DOMContentLoaded', loadSettings);

    // Add notification button functionality
    const notificationButton = document.getElementById('notification-button');
    const notificationDropdown = document.getElementById('notification-dropdown');

    notificationButton.addEventListener('click', (e) => {
      e.stopPropagation();
      notificationDropdown.classList.toggle('hidden');
    });

    // Close notification dropdown when clicking outside
    document.addEventListener('click', (e) => {
      if (!notificationButton.contains(e.target) && !notificationDropdown.contains(e.target)) {
        notificationDropdown.classList.add('hidden');
      }
    });

    // Add notification animation
    notificationButton.addEventListener('mouseenter', () => {
      notificationButton.classList.add('animate-bounce');
    });

    notificationButton.addEventListener('mouseleave', () => {
      notificationButton.classList.remove('animate-bounce');
    });
  </script>
</body>
</html>
