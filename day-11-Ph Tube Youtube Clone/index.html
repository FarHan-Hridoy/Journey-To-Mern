<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PH Tube - YouTube Clone</title>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@3.9.4/dist/full.css" rel="stylesheet" type="text/css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <style>
    body {
      transition: background-color 0.3s, color 0.3s;
    }

    /* Animation keyframes */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes scaleIn {
      from { transform: scale(0.95); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    @keyframes slideIn {
      from { transform: translateX(-20px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    /* Animation classes */
    .animate-fade-in {
      animation: fadeIn 0.5s ease-out forwards;
    }

    .animate-scale-in {
      animation: scaleIn 0.3s ease-out forwards;
    }

    .animate-slide-in {
      animation: slideIn 0.3s ease-out forwards;
    }

    /* Video card hover effects */
    .video-card {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .video-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }

    /* Category button animations */
    .btn {
      transition: all 0.3s ease;
    }

    .btn:hover {
      transform: translateY(-2px);
    }

    /* Modal animations */
    .modal-box {
      animation: scaleIn 0.3s ease-out forwards;
    }

    /* Staggered animation for video cards */
    .video-card {
      opacity: 0;
    }

    .video-card:nth-child(1) { animation-delay: 0.1s; }
    .video-card:nth-child(2) { animation-delay: 0.2s; }
    .video-card:nth-child(3) { animation-delay: 0.3s; }
    .video-card:nth-child(4) { animation-delay: 0.4s; }
    .video-card:nth-child(5) { animation-delay: 0.5s; }
    .video-card:nth-child(6) { animation-delay: 0.6s; }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="navbar bg-base-100 shadow-lg fixed top-0 z-50">
    <div class="flex-1">
      <a class="btn btn-ghost normal-case text-xl">
        <span class="text-red-600 font-bold">PH</span>Tube
      </a>
    </div>
    <!-- Add Search Bar -->
    <div class="flex-none w-96">
      <div class="join w-full">
        <input type="text" placeholder="Search videos..." class="input input-bordered join-item w-full input-sm" id="search-input" />
        <button class="btn btn-sm join-item rounded-r-full" id="search-button">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
        </button>
      </div>
    </div>
    <div class="flex-none gap-4 items-center">
      <div class="flex items-center gap-2">
        <div class="text-sm opacity-70" id="current-time"></div>
        <div class="avatar online cursor-pointer" id="profile-icon">
          <div class="w-10 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2">
            <img src="https://ui-avatars.com/api/?name=Guest&background=random" id="profile-image" />
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Login Modal -->
  <dialog id="login_modal" class="modal">
    <div class="modal-box w-11/12 max-w-md bg-base-200">
      <h3 class="font-bold text-lg mb-4">Sign in to PH Tube</h3>
      <div class="flex flex-col gap-4">
        <div id="g_id_onload"
             data-client_id="YOUR_GOOGLE_CLIENT_ID"
             data-callback="handleCredentialResponse">
        </div>
        <div class="g_id_signin w-full"
             data-type="standard"
             data-size="large"
             data-theme="outline"
             data-text="sign_in_with"
             data-shape="rectangular"
             data-logo_alignment="left"
             data-width="100%">
        </div>
        <div class="divider">OR</div>
        <button class="btn btn-outline" onclick="signInWithGoogle()">
          <img src="https://www.google.com/favicon.ico" class="w-5 h-5 mr-2" />
          Sign in with Google
        </button>
      </div>
      <div class="modal-action">
        <form method="dialog">
          <button class="btn">Close</button>
        </form>
      </div>
    </div>
    <form method="dialog" class="modal-backdrop">
      <button>close</button>
    </form>
  </dialog>

  <!-- Profile Dropdown -->
  <div id="profile-dropdown" class="hidden absolute right-4 top-16 w-48 bg-base-200 rounded-lg shadow-lg z-50">
    <div class="p-4 border-b border-base-300">
      <div class="flex items-center gap-3">
        <div class="avatar">
          <div class="w-10 rounded-full">
            <img src="" id="dropdown-profile-image" />
          </div>
        </div>
        <div>
          <p class="font-semibold" id="dropdown-name">Guest</p>
          <p class="text-sm opacity-70" id="dropdown-email"></p>
        </div>
      </div>
    </div>
    <ul class="py-2">
      <li><a href="#" class="block px-4 py-2 hover:bg-base-300">Your Channel</a></li>
      <li><a href="#" class="block px-4 py-2 hover:bg-base-300">Settings</a></li>
      <li><a href="#" class="block px-4 py-2 hover:bg-base-300">Help</a></li>
      <li class="border-t border-base-300 mt-2"><a href="#" class="block px-4 py-2 hover:bg-base-300 text-error" onclick="signOut()">Sign Out</a></li>
    </ul>
  </div>

  <!-- Main Content -->
  <main class="container mx-auto px-4 pt-20">
    <!-- Categories -->
    <div class="flex gap-4 overflow-x-auto py-4 mb-6">
      <button class="btn btn-primary" data-category="all">All</button>
      <button class="btn btn-ghost" data-category="islamic">Islamic Content</button>
      <button class="btn btn-ghost" data-category="mern">MERN Stack</button>
      <button class="btn btn-ghost" data-category="quran">Quran Recitation</button>
      <button class="btn btn-ghost" data-category="stories">Prophet Stories</button>
      <button class="btn btn-ghost" data-category="tutorials">Programming</button>
    </div>

    <!-- Video Grid -->
    <div id="video-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
  </main>

  <!-- Modal -->
  <dialog id="video_modal" class="modal">
    <div class="modal-box w-11/12 max-w-5xl bg-base-200">
      <div class="aspect-video w-full bg-black">
        <iframe id="video_player" class="w-full h-full" src="" frameborder="0" allowfullscreen></iframe>
      </div>
      <div class="mt-4">
        <h3 id="video_title" class="text-xl font-bold"></h3>
        <p id="video_views" class="text-sm opacity-70"></p>
        <p id="video_description" class="mt-2 text-sm"></p>
      </div>
      <div class="modal-action">
        <form method="dialog">
          <button class="btn">Close</button>
        </form>
      </div>
    </div>
    <form method="dialog" class="modal-backdrop">
      <button>close</button>
    </form>
  </dialog>

  <script>
    // User state
    let currentUser = null;

    // Search functionality
    const searchInput = document.getElementById('search-input');
    const searchButton = document.getElementById('search-button');

    function performSearch() {
      const searchTerm = searchInput.value.toLowerCase().trim();
      if (!searchTerm) {
        renderVideos(currentCategory);
        return;
      }

      const filteredVideos = videoData.filter(video => 
        video.title.toLowerCase().includes(searchTerm) ||
        video.channel.toLowerCase().includes(searchTerm) ||
        video.description.toLowerCase().includes(searchTerm)
      );

      grid.innerHTML = "";
      filteredVideos.forEach((video, index) => {
        const card = document.createElement("div");
        card.className = "video-card bg-base-200 rounded-lg overflow-hidden cursor-pointer animate-fade-in";
        card.style.animationDelay = `${index * 0.1}s`;
        card.innerHTML = `
          <figure class="relative group">
            <img src="https://i.ytimg.com/vi/${video.videoId}/maxresdefault.jpg" class="w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105" />
            <span class="absolute bottom-2 right-2 bg-black bg-opacity-80 text-white px-2 py-1 rounded text-sm transform transition-transform duration-300 group-hover:scale-110">▶️</span>
          </figure>
          <div class="p-4">
            <div class="flex gap-3">
              <div class="channel-icon w-10 h-10 rounded-full overflow-hidden transition-transform duration-300 hover:scale-110">
                <img src="https://ui-avatars.com/api/?name=${encodeURIComponent(video.channel)}&background=random" />
              </div>
              <div>
                <h3 class="font-semibold transition-colors duration-300 hover:text-primary">${video.title}</h3>
                <p class="text-sm opacity-70">${video.channel}</p>
                <p class="text-sm opacity-70">${video.views}</p>
              </div>
            </div>
          </div>
        `;
        card.addEventListener("click", () => {
          videoTitle.textContent = video.title;
          videoViews.textContent = video.views;
          videoDescription.textContent = video.description;
          videoPlayer.src = `https://www.youtube.com/embed/${video.videoId}?autoplay=1`;
          modal.showModal();
        });
        grid.appendChild(card);
      });
    }

    // Search event listeners
    searchButton.addEventListener('click', performSearch);
    searchInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        performSearch();
      }
    });

    // Clear search when changing categories
    document.querySelectorAll('[data-category]').forEach(button => {
      button.addEventListener('click', () => {
        searchInput.value = '';
        // ... existing category button code ...
      });
    });

    // Profile icon click handler
    document.getElementById('profile-icon').addEventListener('click', () => {
      if (currentUser) {
        const dropdown = document.getElementById('profile-dropdown');
        dropdown.classList.toggle('hidden');
      } else {
        document.getElementById('login_modal').showModal();
      }
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', (e) => {
      const dropdown = document.getElementById('profile-dropdown');
      const profileIcon = document.getElementById('profile-icon');
      if (!profileIcon.contains(e.target) && !dropdown.contains(e.target)) {
        dropdown.classList.add('hidden');
      }
    });

    // Handle Google Sign-In
    function handleCredentialResponse(response) {
      // Decode the credential response
      const responsePayload = jwt_decode(response.credential);
      
      // Update UI with user info
      currentUser = {
        name: responsePayload.name,
        email: responsePayload.email,
        picture: responsePayload.picture
      };

      updateProfileUI();
      document.getElementById('login_modal').close();
    }

    // Update profile UI
    function updateProfileUI() {
      if (currentUser) {
        document.getElementById('profile-image').src = currentUser.picture;
        document.getElementById('dropdown-profile-image').src = currentUser.picture;
        document.getElementById('dropdown-name').textContent = currentUser.name;
        document.getElementById('dropdown-email').textContent = currentUser.email;
      } else {
        document.getElementById('profile-image').src = 'https://ui-avatars.com/api/?name=Guest&background=random';
        document.getElementById('dropdown-profile-image').src = 'https://ui-avatars.com/api/?name=Guest&background=random';
        document.getElementById('dropdown-name').textContent = 'Guest';
        document.getElementById('dropdown-email').textContent = '';
      }
    }

    // Sign out function
    function signOut() {
      currentUser = null;
      updateProfileUI();
      document.getElementById('profile-dropdown').classList.add('hidden');
    }

    // Add clock functionality
    function updateClock() {
      const now = new Date();
      const timeString = now.toLocaleTimeString('en-US', { 
        hour: '2-digit', 
        minute: '2-digit',
        hour12: true 
      });
      document.getElementById('current-time').textContent = timeString;
    }

    // Update clock every second
    setInterval(updateClock, 1000);
    updateClock(); // Initial call

    const modal = document.getElementById("video_modal");
    const videoPlayer = document.getElementById("video_player");
    const videoTitle = document.getElementById("video_title");
    const videoViews = document.getElementById("video_views");
    const videoDescription = document.getElementById("video_description");

    // Add category to each video
    const videoData = [
      {
        title: "MERN Stack Tutorials",
        channel: "MERN Stack Pro",
        views: "2.1M views • 1 week ago",
        description: "Build a complete MERN Stack application from scratch.",
        videoId: "dGcsHMXbSOA",
        category: "mern"
      },
      {
        title: "Islamic History Video Playlists",
        channel: "Islamic History Channel",
        views: "2.5M views • 1 week ago",
        description: "A comprehensive animated series on early Islamic events.",
        videoId: "N8LhHkMeBxk",
        category: "islamic"
      },
      {
        title: "Surah Yasin Recitation",
        channel: "Quran Reciter",
        views: "3M views • 2 weeks ago",
        description: "Beautiful recitation of Surah Yasin.",
        videoId: "bx5EOcX3YcA",
        category: "quran"
      },
      {
        title: "React.js for Beginners",
        channel: "Code Academy",
        views: "1.5M views • 2 months ago",
        description: "Learn React.js from scratch.",
        videoId: "Ke90Tje7VS0",
        category: "tutorials"
      },
      {
        title: "The Story of Prophet Yusuf (AS)",
        channel: "Islamic Stories",
        views: "2.9M views • 3 weeks ago",
        description: "Animated story of Prophet Yusuf.",
        videoId: "TlObLz0wJAk",
        category: "stories"
      },
      {
        title: "Build REST APIs with Node.js",
        channel: "Backend Pro",
        views: "980K views • 5 days ago",
        description: "Learn how to build APIs using Node.js.",
        videoId: "Oe421EPjeBE",
        category: "tutorials"
      },
      {
        title: "Understanding Islamic Finance",
        channel: "Islamic Scholar",
        views: "1.1M views • 1 month ago",
        description: "An introduction to Islamic financial principles.",
        videoId: "t_HlWjKxzXM",
        category: "islamic"
      },
      {
        title: "MongoDB Complete Tutorial",
        channel: "Database Master",
        views: "670K views • 2 weeks ago",
        description: "Learn everything about MongoDB.",
        videoId: "ofme2o29ngU",
        category: "mern"
      },
      {
        title: "Importance of Salah",
        channel: "Islamic Education",
        views: "2.2M views • 3 weeks ago",
        description: "Why prayer is the pillar of Islam.",
        videoId: "fDDyE1JcpDA",
        category: "islamic"
      },
      {
        title: "Redux Crash Course",
        channel: "React Master",
        views: "1.8M views • 1 week ago",
        description: "Master Redux in one video.",
        videoId: "poQXNp9ItL4",
        category: "tutorials"
      },
      {
        title: "Islamic Architecture",
        channel: "Muslim Heritage",
        views: "900K views • 2 months ago",
        description: "Explore historic Islamic architecture.",
        videoId: "UMWZMl9KccU",
        category: "islamic"
      },
      {
        title: "Node.js Authentication",
        channel: "Auth Guru",
        views: "1.2M views • 4 days ago",
        description: "JWT and secure auth in Node.js.",
        videoId: "2jqok-WgelI",
        category: "mern"
      },
      {
        title: "Animated Prophet Stories",
        channel: "Islamic Kids",
        views: "1.9M views • 5 weeks ago",
        description: "Prophet stories for children.",
        videoId: "v0vU2gopABY",
        category: "stories"
      },
      {
        title: "Full Stack E-commerce App",
        channel: "Code Pro",
        views: "3.3M views • 3 weeks ago",
        description: "MERN stack project walkthrough.",
        videoId: "1NrHkjlWVhM",
        category: "mern"
      },
      {
        title: "Surah Ar-Rahman",
        channel: "Quran World",
        views: "2.7M views • 2 weeks ago",
        description: "Emotional recitation of Surah Ar-Rahman.",
        videoId: "9-6cY2rp5pk",
        category: "quran"
      },
      {
        title: "React Routing with React Router",
        channel: "Dev Simplified",
        views: "1.3M views • 1 month ago",
        description: "Guide to React Router v6.",
        videoId: "Law7wfdg_ls",
        category: "tutorials"
      },
      {
        title: "Hajj Explained",
        channel: "Islamic Guidance",
        views: "1.5M views • 4 weeks ago",
        description: "Step-by-step Hajj guide.",
        videoId: "HZ0L2DC3uhk",
        category: "islamic"
      },
      {
        title: "Learn HTML in 1 Hour",
        channel: "Web Dev Simplified",
        views: "5M views • 1 year ago",
        description: "Quick HTML crash course.",
        videoId: "UB1O30fR-EE",
        category: "tutorials"
      },
      {
        title: "Surah Al-Mulk Recitation",
        channel: "Quran Lovers",
        views: "2.9M views • 1 month ago",
        description: "Soothing recitation of Surah Al-Mulk.",
        videoId: "N5pK7E_0C6M",
        category: "quran"
      }
    ];

    const grid = document.getElementById("video-grid");
    let currentCategory = "all";

    function renderVideos(category = "all") {
      grid.innerHTML = "";
      const filteredVideos = category === "all" 
        ? videoData 
        : videoData.filter(video => video.category === category);

      filteredVideos.forEach((video, index) => {
        const card = document.createElement("div");
        card.className = "video-card bg-base-200 rounded-lg overflow-hidden cursor-pointer animate-fade-in";
        card.style.animationDelay = `${index * 0.1}s`;
        card.innerHTML = `
          <figure class="relative group">
            <img src="https://i.ytimg.com/vi/${video.videoId}/maxresdefault.jpg" class="w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105" />
            <span class="absolute bottom-2 right-2 bg-black bg-opacity-80 text-white px-2 py-1 rounded text-sm transform transition-transform duration-300 group-hover:scale-110">▶️</span>
          </figure>
          <div class="p-4">
            <div class="flex gap-3">
              <div class="channel-icon w-10 h-10 rounded-full overflow-hidden transition-transform duration-300 hover:scale-110">
                <img src="https://ui-avatars.com/api/?name=${encodeURIComponent(video.channel)}&background=random" />
              </div>
              <div>
                <h3 class="font-semibold transition-colors duration-300 hover:text-primary">${video.title}</h3>
                <p class="text-sm opacity-70">${video.channel}</p>
                <p class="text-sm opacity-70">${video.views}</p>
              </div>
            </div>
          </div>
        `;
        card.addEventListener("click", () => {
          videoTitle.textContent = video.title;
          videoViews.textContent = video.views;
          videoDescription.textContent = video.description;
          videoPlayer.src = `https://www.youtube.com/embed/${video.videoId}?autoplay=1`;
          modal.showModal();
        });
        grid.appendChild(card);
      });
    }

    // Add click handlers for category buttons
    document.querySelectorAll('[data-category]').forEach(button => {
      button.addEventListener('click', () => {
        // Update button styles with animation
        document.querySelectorAll('[data-category]').forEach(btn => {
          btn.classList.remove('btn-primary');
          btn.classList.add('btn-ghost');
          btn.classList.add('animate-slide-in');
        });
        button.classList.remove('btn-ghost');
        button.classList.add('btn-primary');
        button.classList.add('animate-scale-in');

        // Update videos
        currentCategory = button.dataset.category;
        renderVideos(currentCategory);
      });
    });

    // Initial render
    renderVideos();

    modal.addEventListener("close", () => {
      videoPlayer.src = "";
    });
  </script>
</body>
</html>
